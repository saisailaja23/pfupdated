<!--<script type="text/javascript" src="grid/dhtmlxfull/dhtmlx.js"></script>
<link rel="stylesheet" type="text/css" href="grid/dhtmlxfull/dhtmlx.css">
-->
<!--
<link rel="STYLESHEET" type="text/css" href="Matching/Memberslist/dhtmlxGrid/dhtmlxgrid.css"/>
<link rel="STYLESHEET" type="text/css" href="Matching/Memberslist/dhtmlxGrid/skins/dhtmlxgrid_dhx_skyblue.css"/>
<link rel="STYLESHEET" type="text/css" href="Matching/dhtmlxToolbar/codebase/skins/dhtmlxtoolbar_dhx_skyblue.css">
<link rel="STYLESHEET" type="text/css" href="Matching/Memberslist/dhtmlxGrid/skins/dhtmlxgrid_dhx_skyblue.css"/>
<link rel="stylesheet" type="text/css" href="Matching/Memberslist/dhtmlxGrid/skins/dhtmlxmenu_dhx_skyblue.css">
-->

<link type="text/css" href="Matching/css/jquery-ui-1.8.2.custom.css" rel="stylesheet" />
<!--
<script  src="Matching/Memberslist/dhtmlxGrid/dhtmlxcommon.js"></script>
<script  src="Matching/Memberslist/dhtmlxGrid/dhtmlxgrid.js"></script>
<script  src="Matching/Memberslist/dhtmlxGrid/ext/dhtmlxgrid_pgn.js"></script>
<script  src="Matching/Memberslist/dhtmlxGrid/dhtmlxgridcell.js"></script>
<script  src="Matching/Memberslist/dhtmlxGrid/ext/dhtmlxgrid_start.js"></script>
<script  src="Matching/dhtmlxToolbar/codebase/dhtmlxtoolbar.js"></script>
<script  src="Matching/Memberslist/dhtmlxGrid/ext/dhtmlxgrid_filter.js"></script>
<script  src="Matching/Memberslist/dhtmlxGrid/client/dhtmlxgrid_export.js"></script>
<script  src="Matching/Memberslist/dhtmlxGrid/excells/dhtmlxgrid_excell_link.js"></script>
<script language="JavaScript" src="Matching/Memberslist/dhtmlxGrid/dhtmlxmenu.js"></script>
<script  src="Matching/Memberslist/dhtmlxGrid/ext/dhtmlxmenu_ext.js"></script>
-->
<script type="text/javascript" src="lightbox/thickbox-compressed.js"></script>
<link rel="stylesheet" href="lightbox/thickbox.css" type="text/css" media="screen"/>
<script>
        dhtmlx.skin = "dhx_skyblue";
</script>

<script type="text/javascript" src="Matching/js/dialog.js"></script>
<script type="text/javascript" src="Matching/js/jquery-ui-1.8.2.custom.min.js"></script>

<style type="text/css">
.tipz {z-index:2000;
}
.tip {
border:1px solid #ddd;
padding:5px 15px;
background:#ffffff;
width:auto;
border-radius:25px;
-moz-border-radius:15px;  }
.tip-title { color:black; font-size:11.4px; margin:5px 5px 0 5px; width: 150px;text-align: center;background:#fff; padding: 1px 3px 1px 3px; }
</style>
<div class="adm-mp-members-wrapper" id="adm-mp-members-geeky" style="">
<div class="adm-mp-members-geeky">



<script type="text/javascript">
/*jQuery(function(){
		 $(".img-swap").live('click', function() {alert('class');
		 	if ($(this).attr("class") == "img-swap") {

			this.src  = this.src.replace("_off","_on");
                        this.alt = this.alt.replace("off","on");
                        $(this).text("Hide").attr("title", "Disable Global Search");



			$("#imgtype").val('YES');



			} else {

                          this.src = this.src.replace("_on","_off");
			     this.alt = this.alt.replace("on","off");
                          $(this).text("Show").attr("title", "Enable Global Search");





			$("#imgtype").val('NO');

			}

			$(this).toggleClass("on");

		});
});
*/
jQuery(document).ready(function() {
jQuery("#calculator").dialog(
            {
                bgiframe: true,
                width: 412,
                height: 130,
                modal: true,
                autoOpen: false,
                draggable: true,
                resizable: false,
                title: 'Maximum Match Records',
                open: function(event, ui) {
                var curr_value = $('#set_cur_val').val();
                $('#current_val').html(curr_value);
                $('#record').val('');
                },
                close: function(event, ui) {  }
               // close: function() {  }
            }
        );
jQuery("#calculator1").dialog(
            {
                bgiframe: true,
                width: 412,
                height: 130,
                modal: true,
                autoOpen: false,
                draggable: true,
                resizable: false,
                title: 'Minimum Match %',
                open: function(event, ui) {
                var curr_value1 = $('#set_cur_val1').val();
                $('#current_val1').html(curr_value1);
                $('#match').val('');
                },
                close: function(event, ui) {  }

            }
        );



});function popup(elem) {
//alert('popup');

//alert($("#imgtype").val());
//document.getElementById(imageid).title="New tooltip"
//var val = ($("#imageid").attr("alt"));

  var uid = elem.id;
  var val = ($("#"+uid).attr("alt"));
  var title = ($("#"+uid).attr("title"));
//alert(uid);
//alert(title);
//var gvall = "Yes";
  if(val == "Disabled Global Search")
  {
    elem.src  = elem.src.replace("_off","_on");
    elem.alt =  elem.alt.replace("Disabled Global Search","Enabled Global Search");
     //tooltips();

   // elem.title("Hide").attr("title", "Disable Global Search");
    //$('#greatphoto').attr('title', 'Photo by Kelly Clark')


    $("#imgtype").val('YES');
    var gval = "Yes";
  }
  else
  {
    elem.src = elem.src.replace("_on","_off");
    elem.alt = elem.alt.replace("Enabled Global Search","Disabled Global Search");
    //tooltips();
    $("#imgtype").val('NO');
    var gval = "No";
  }
//elem.toggleClass("on");
//alert(gval);

 jQuery.ajax({
                 url: 'client_list.php',
                 type: "POST",
                 cache: false,
                 data: {printid : gval, userid : uid},
                 success: function(data) {

                                }
                            });
}



</script>

<script type="text/javascript">

                            function placewindow()
                                   {
                                    var val=document.getElementById('boxtitle').innerHTML;
                                  //  location.href="<bx_url_root />watermark.php?status=placed&name="+val;
                                  //  location.href="<bx_url_root />watermark_old.php?status=placed&name="+val;
                                     location.href="<bx_url_root />watermark_latest.php?status=placed&name="+val;
                                    }
                            function notplacedwindow()
                                    {
                                    var val=document.getElementById('boxtitle').innerHTML;
                                   //  location.href="<bx_url_root />watermark.php?status=notplaced&name="+val;
                                   // location.href="<bx_url_root />watermark_old.php?status=notplaced&name="+val;
                                     location.href="<bx_url_root />watermark_latest.php?status=notplaced&name="+val;
                                    }
                            </script>
                            <link type="text/css" rel="stylesheet" href="templates/base/css/lightbox-form.css"/>
                            <script src="inc/js/lightbox-form.js" type="text/javascript"></script>
                            <div id="shadowing" title=""></div>
                            <div id="box" style="margin:115px 278px 0px;z-index:10000;">
                              <span id="boxtitle"></span>
                              <span  stye="cursor:pointer;"><input onclick="placewindow()" type="button" name="submit" value="Placed" /></span>
                                         &nbsp;<span  stye="cursor:pointer;"><input onclick="notplacedwindow()" type="button" name="cancel" value="NotPlaced"></span>
                             </div>



<div class="dhx_toolbar_base_18_dhx_skyblue"><b><p style="margin-top:5px;">User Management & Matching</p></b></div>
<div id="menuObj"></div>
<table gridHeight="auto" name="grid2" id="grid_user" onbeforeinit="myfunc1()" imgpath="Matching/Memberslist/dhtmlxGrid/imgs/" style="width:100%;display: none;" lightnavigation="true">

<tr>
			<td  width="20px" type="ro" sort="na">&nbsp;</td>
                        <td  width="20px" type="ro" sort="na">&nbsp;</td>
                        <td  width="20px" type="ro" sort="na">&nbsp;</td>
                        <td  width="20px" type="ro" sort="na">&nbsp;</td>
                        <td  width="20px" type="ro" sort="na">&nbsp;</td>
                        <td  width="20px" type="ro" sort="na">&nbsp;</td>
                        <td  width="25px" type="ro" sort="na">&nbsp;</td>

                        <td  width="150px"  type="ro" sort="str">User Name</td>
                        <td  width="105px"  type="ro" sort="str">Last Name</td>
                        <td  width="150"  type="ro" sort="str">First Name</td>
                        <td  width="75px"  type="ro" sort="str">Profile Type</td>
                        <td  width="75px"  type="ro" sort="str">Status</td>
                        <td  width="230px"  type="ro" sort="str">Membership</td>
                        <td  width="70px"  type="ro" sort="date">Registered</td>
                        <td  width="82px"  type="ro" sort="na">Upgrade Date</td>
                        <td  width="95px"  type="ro" sort="date">Last Visited</td>
                        <td  width="82px"  type="ro" hidden="true">Globally Enabled</td>
		</tr>


		<bx_repeat:items>
                   <tr>
                        <td width="420"><input type="checkbox" class="form_input_checkbox" id="adm-mp-__id__" name="members[]" value="__id__" />
                         </td>
                         <td title="__watermarkstatus__" > __match__  </td>
                         <td title="Visit Profile">  __profile_icon__ </td>
                         <td title="Change Password">  __changepass_icon__  </td>
                         <td title="Change Profile Photo">  __avatar_icon__ </td>
                         <td title="__globalstatus__">  __global_icon__ </td>
                         <td title="Matching Information">  __match_icon__ </td>



                        <td width="*" title =__email__><a href="__edit_link__" class="__edit_class__" id="__status__">__username__</a></td>
                        <td width="130">__lastname__</td>
                        <td width="150">__firstname__ __cname__</td>
                        <td width="170">__profiletype__</td>
                        <td width="90">__status__</td>
                        <td width="150">__ml_name__</td>
                        <td width="90">__registration__</td>
                        <td width="180">__dateofupgrades__</td>
                        <td width="80">__last_login__</td>
                        <td width="120">__globalvalue__</td>
                    </tr>
                </bx_repeat:items>

</table>


<div id="recinfoArea" style="width:100%;"></div>

<script type="text/javascript">

    function onButtonClick(id) {

    if(id == 'max') {

      jQuery('#calculator').dialog('open');

            }

    else if(id == 'match') {

      jQuery('#calculator1').dialog('open');



    }
     else if(id == 'export')
        {
            grid2.setColumnHidden(0,true);
            grid2.setColumnHidden(1,true);
            grid2.setColumnHidden(2,true);
            grid2.setColumnHidden(3,true);
            grid2.setColumnHidden(4,true);
            grid2.setColumnHidden(5,true);
            grid2.setColumnHidden(6,true);

            grid2.setColumnHidden(16,false);
            grid2.changePage(0);
            grid2.toExcel('http://www.parentfinder.com/export/generate.php');



            grid2.setColumnHidden(0,false);
            grid2.setColumnHidden(1,false);
            grid2.setColumnHidden(2,false);
            grid2.setColumnHidden(3,false);
            grid2.setColumnHidden(4,false);
            grid2.setColumnHidden(5,false);
            grid2.setColumnHidden(6,false);

            grid2.setColumnHidden(16,true);
           /* setTimeout( function() {
                if($.browser.safari)
                    window.location.reload();
            }, 1000);
            */
        }


      }

  //function record(id){

  //jQuery('#rowid').val(id);
  //jQuery('#rowid1').val(id);

  //}

 function test() {



var val = jQuery('#rowid').val();
var rec = jQuery('#record').val();

if (isNaN( rec ) ||  rec > 500 || rec < 0 )
   {
       alert("Please enter a value between 1 - 500.");
       document.getElementById('record').value = "";

       jQuery('#record').focus();
       //return false;

             }
else {
     jQuery.ajax({
     url: 'update_match.php',
     type: "post",
     cache: false,
    //data : jQuery("#form_ser_emp").serialize(),

      data: {userid : val, record : rec},

    // datatype : "html",

     success: function(data) {
     $('#set_cur_val').val($('#record').val())


     jQuery("#calculator").dialog("close");


               }
            });

 }

 }
  function test1() {


      var val1 = jQuery('#rowid1').val();
     var rec1 = jQuery('#match').val();

if (isNaN( rec1 ) ||  rec1 > 100 || rec1 < 0 )
    {
       alert("Please enter a value between 1 - 100.");
       document.getElementById('match').value = "";

       jQuery('#match').focus();
       //return false;

             }
else {




     jQuery.ajax({
     url: 'update_match.php',
     type: "post",
     cache: false,
    //data : jQuery("#form_ser_emp").serialize(),

      data: {userid : val1, match : rec1},

    // datatype : "html",

     success: function(data) {
         $('#set_cur_val1').val($('#match').val())


     jQuery("#calculator1").dialog("close");

               }
            });
 }
}
    function myfunc1()
    {
        grid2.enablePaging(true,10,5,"recinfoArea");
        grid2.setPagingSkin("toolbar","dhx_skyblue");

        grid2.attachHeader("#rspan,#rspan,#rspan,#rspan,#rspan,#rspan,#rspan,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter");
        grid2.enableTooltips("false,true,true,true,true,true,true,true,true");
        grid2.enableAutoHeight(true);
        grid2.init();
        grid2.setColumnHidden(1,true);
        grid2.setColumnHidden(1,true);
        grid2.setColumnHidden(1,true);
        grid2.setColumnHidden(13,true);
        grid2.setColumnHidden(14,true);
        grid2.setColumnHidden(16,true);

        var menu;


        menu = new dhtmlXMenuObject("menuObj");
        menu.setIconsPath("Matching/Memberslist/dhtmlxGrid/imgs/");
        menu.addNewSibling(null, "export", "Export");
        menu.addNewSibling(null, "opts", "Configuration Settings");

       // menu.addNewSibling("opts", "color", "Color");
        //menu.addNewSibling("opts", "help", "Help", false);

        menu.addNewChild("opts", 0, "max", "Max Match Records", false, "true.gif");
        menu.addNewChild("opts", 1, "match", "Minimum Match %", false, "red.gif");

      //  menu.addNewChild("help", 0, "about", "About...", false, "about.gif");
      //  menu.addNewChild("help", 1, "help2", "Help", false, "help.gif");
      //  menu.addNewChild("help", 2, "bugrep", "Bug Reporting", false, "bug_reporting.gif");

        menu.attachEvent("onClick", onButtonClick);
    }

    var mygrid_html = new dhtmlXGridFromTable('grid_user');
    mygrid_html.changePage(0);



   // tooltips();
    grid2.attachEvent("onPaging", function(grid_obj,count){
                                  //  tooltips();
                                 });

 /*

 function tooltips(){

        $$('img.tipz').each(function(element,index) {

                //element.store('tip:title', 'Adoption Portal');
              //  alert(element.id);
                element.store('tip:text',element.alt );
        });

        //create the tooltips
        var tipz = new Tips('.tipz',{
                className: 'tipz',
                fixed: true,
                hideDelay: 50,
                showDelay: 50,
                offset: {'x': 10, 'y': 25}


            });
        }

*/
</script>

<div id="calculator" style="display: none;margin-left: 90px;">
<table>
    <tr><td style="text-align:right;">Current Value:</td><td><span id="current_val"></span></td></tr>
    <tr><td style="text-align:right;">New Value:</td><td><input type="text" id="record" name="records" /></td></tr>
    <input type="hidden" id="rowid" name="uid" />
     <bx_repeat:aaa>
       <input type="hidden" id="set_cur_val" value=__matchrecords__ />
    </bx_repeat:aaa>
</table>
   <br/> <div style="margin-left:100px;"><input type="Button"  id="sub" name="submit" value="Save" onclick="test();" /></div>
</div>

<div id="calculator1" style="display: none;;margin-left: 90px;">
<table>
    <tr><td style="text-align:right;">Current Value:</td><td><span id="current_val1"></span></td></tr>
    <tr><td style="text-align:right;">New Value:</td><td><input type="text" id="match" name="records" /></td></tr>
    <input type="hidden" id="rowid1" name="uid" />
    <bx_repeat:aaa>
       <input type="hidden" id="set_cur_val1" value=__maxmatch__ />
    </bx_repeat:aaa>
</table>
<br/> <div style="margin-left:100px;"><input type="Button"  id="sub1" name="submit1" value="Save" onclick="test1();"/></div>
</div>
</div>
</div>